- alias: "Turn Front Porch Lights On"
  trigger:
    platform: event
    event_type: state_changed
    event_data:
      entity_id: sun.sun
  condition:
    condition: and
    conditions:
      - condition: numeric_state
        entity_id: sun.sun
        value_template: '{{ state.attributes.elevation }}'
        below: -3.30
      - condition: state
        entity_id: switch.front_porch_light
        state: 'off'
  action:
    service: switch.turn_on
    entity_id: switch.front_porch_light
- alias: "Turn Front Porch Lights Off"
  trigger:
    platform: event
    event_type: state_changed
    event_data:
      entity_id: sun.sun
  condition:
    condition: and
    conditions:
      - condition: numeric_state
        entity_id: sun.sun
        value_template: '{{ state.attributes.elevation }}'
        above: -3.31
      - condition: state
        entity_id: switch.front_porch_light
        state: 'on'
  action:
    service: switch.turn_off
    entity_id: switch.front_porch_light
- alias: "Ensure Front Porch Lights Stay On"
  initial_state: False
  trigger:
    - platform: state
      entity_id: switch.front_porch_light
      state: 'off'
      for:
        seconds: 30
  condition:
    - condition: numeric_state
      entity_id: sun.sun
      value_template: '{{ state.attributes.elevation }}'
      below: -3.30 # exclusive; below = -2.51, -2.52, -2.53, etc
  action:
    - service: switch.turn_on
      entity_id: switch.front_porch_light
- alias: "Ensure Front Porch Lights Stay Off"
  initial_state: False
  trigger:
    - platform: state
      entity_id: switch.front_porch_light
      state: 'on'
      for:
        seconds: 30
  condition:
    - condition: numeric_state
      entity_id: sun.sun
      value_template: '{{ state.attributes.elevation }}'
      above: -3.31 # exclusive; above = -2.50, -2.49, -2.48, etc
  action:
    - service: switch.turn_off
      entity_id: switch.front_porch_light
